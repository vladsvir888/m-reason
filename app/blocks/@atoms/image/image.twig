{% set filename = image.name|split(".")|first %}
{% set path = "./assets/images/" %}
{% set image_lazy = image.lazy|default(true) %}

{% if image_lazy %}
  <picture
    {% if image.picture.class %}
      class="{{ image.picture.class }}"
    {% endif %}
  >
    <source
      type="image/avif"
      srcset="{{ path ~ filename ~ '.avif' }}"
    >
    <source
      type="image/webp"
      srcset="{{ path ~ filename ~ '.webp' }}"
    >
    <img
      class="img {% if image.class %}{{ image.class }}{% endif %}"
      src="{{ path ~ image.name }}"
      loading="lazy"
      {% if image.alt is defined %}alt="{{ image.alt }}"{% endif %}
      {% if image.sizes.width %}width="{{ image.sizes.width }}"{% endif %}
      {% if image.sizes.height %}height="{{ image.sizes.height }}"{% endif %}
      {% if image.attrs %}{{ image.attrs }}{% endif %}
    >
  </picture>
{% else %}
  <picture
    {% if image.picture.class %}
      class="{{ image.picture.class }}"
    {% endif %}
  >
    <source
      type="image/avif"
      srcset="{{ path ~ filename ~ '.avif' }}"
    >
    <source
      type="image/webp"
      srcset="{{ path ~ filename ~ '.webp' }}"
    >
    <img
      class="img {% if image.class %}{{ image.class }}{% endif %}"
      src="{{ path ~ image.name }}"
      {% if image.alt is defined %}alt="{{ image.alt }}"{% endif %}
      {% if image.sizes.width %}width="{{ image.sizes.width }}"{% endif %}
      {% if image.sizes.height %}height="{{ image.sizes.height }}"{% endif %}
      {% if image.attrs %}{{ image.attrs }}{% endif %}
    >
  </picture>
{% endif %}
